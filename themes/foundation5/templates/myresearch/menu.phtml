<!-- myresearch - MENU.phtml -->
<h4><?= $this->transEsc('Your Account') ?></h4>
<ul class="side-nav">
  <? if ($this->userlist()->getMode() !== 'disabled'): ?>
    <li>
      <a href="<?= $this->url('myresearch-favorites') ?>"
         class="<?= $this->active == 'favorites' ? ' active' : '' ?>">
        <?= $this->transEsc('Favorites') ?>
        <span class="pull-right"><i class="fa fa-fw fa-star"></i></span>
      </a>
    </li>
  <? endif; ?>
  <? if ('ils-none' !== $this->ils()->getOfflineMode()): ?>
    <? if ($this->ils()->checkCapability('getMyTransactions')): ?>
      <li>
        <a href="<?= $this->url('myresearch-checkedout') ?>" class="<?= $this->active == 'checkedout' ? ' active' : '' ?>">
          <?= $this->transEsc('Checked Out Items') ?>
          <span class="pull-right"><i class="fa fa-fw fa-book"></i></span>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkCapability('getMyHolds')): ?>
      <li>
        <a href="<?= $this->url('myresearch-holds') ?>" class="<?= $this->active == 'holds' ? ' active' : '' ?>">
          <?= $this->transEsc('Holds and Recalls') ?>
          <span class="pull-right"><i class="fa fa-fw fa-flag"></i></span>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkFunction('StorageRetrievalRequests')): ?>
      <li>
        <a href="<?= $this->url('myresearch-storageretrievalrequests') ?>" class="<?= $this->active == 'storageRetrievalRequests' ? ' active' : '' ?>">
          <?= $this->transEsc('Storage Retrieval Requests') ?>
          <span class="pull-right"><i class="fa fa-fw fa-archive"></i></span>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkFunction('ILLRequests')): ?>
      <li>
        <a href="<?= $this->url('myresearch-illrequests') ?>" class="<?= $this->active == 'ILLRequests' ? ' active' : '' ?>">
          <?= $this->transEsc('Interlibrary Loan Requests') ?>
          <span class="pull-right"><i class="fa fa-fw fa-exchange"></i></span>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkCapability('getMyFines')): ?>
      <li><a href="<?= $this->url('myresearch-fines') ?>" class="<?= $this->active == 'fines' ? ' active' : '' ?>">
          <?= $this->transEsc('Fines') ?>
          <span class="pull-right"><i class="fa fa-fw fa-usd"></i></span>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkCapability('getMyProfile')): ?>
      <li>
        <a href="<?= $this->url('myresearch-profile') ?>" class="<?= $this->active == 'profile' ? ' active' : '' ?>">
          <?= $this->transEsc('Profile') ?>
          <span class="pull-right"><i class="fa fa-fw fa-user"></i></span>
        </a>
      </li>
    <? endif; ?>
    <? $user = $this->auth()->isLoggedIn();
    if ($user && $user->libraryCardsEnabled()): ?>
      <li>
        <a href="<?= $this->url('librarycards-home') ?>" class="<?= $this->active == 'librarycards' ? ' active' : '' ?>">
          <?= $this->transEsc('Library Cards') ?>
          <span class="pull-right"><i class="fa fa-fw fa-barcode"></i></span>
        </a>
      </li>
    <? endif; ?>
  <? endif; ?>
  <li>
    <a href="<?= $this->url('search-history') ?>?require_login" class="<?= $this->active == 'history' ? ' active' : '' ?>">
      <?= $this->transEsc('history_saved_searches') ?>
      <span class="pull-right"><i class="fa fa-fw fa-search"></i></span>
    </a>
  </li>
  <? if ($user = $this->auth()->isLoggedIn()): ?>
    <li>
      <a href="<?= $this->url('myresearch-logout') ?>">
        <?= $this->transEsc("Log Out") ?>
        <span class="pull-right"><i class="fa fa-fw fa-sign-out"></i></span>
      </a>
    </li>
  <? endif; ?>
</ul>
<? if ($this->auth()->isLoggedIn() && $this->auth()->getManager()->supportsPasswordChange()): ?>
  <h4><?= $this->transEsc('Preferences') ?></h4>
  <ul class="side-nav">
    <li>
      <a href="<?= $this->url('myresearch-changepassword') ?>" class="<?= $this->active == 'newpassword' ? ' active' : '' ?>">
        <?= $this->transEsc('Change Password') ?>
        <span class="pull-right"><i class="fa fa-fw fa-lock"></i></span>
      </a>
    </li>
  </ul>
<? endif; ?>
<? if ($this->userlist()->getMode() !== 'disabled' && $user = $this->auth()->isLoggedIn()): ?>
  <h4><?= $this->transEsc('Your Lists') ?></h4>
  <ul class="side-nav">
    <li>
      <a href="<?= $this->url('myresearch-favorites') ?>" class="<?= $this->active == 'favorites' ? ' active' : '' ?>">
        <?= $this->transEsc('Your Favorites') ?>
        <span class="pull-right"><i class="fa fa-fw fa-star"></i></span>
      </a>
    </li>
    <? $lists = $user->getLists() ?>
    <? foreach ($lists as $list): ?>
      <li>
        <a href="<?= $this->url('userList', array('id' => $list['id'])) ?>" class="<?= $this->active == 'list' . $list['id'] ? ' active' : '' ?>">
          <?= $this->escapeHtml($list['title']) ?>
          <span class="label"><?= $list->cnt ?></span>
        </a>
      </li>
    <? endforeach; ?>
    <li>
      <a href="<?= $this->url('editList', array('id' => 'NEW')) ?>" title="<?= $this->transEsc('Create a List') ?>">
        <?= $this->transEsc('Create a List') ?>
        <span class="pull-right"><i class="fa fa-fw fa-plus"></i></span>
      </a>
    </li>
  </ul>
<? endif ?>
<!-- myresearch - MENU.phtml - end -->