<?php
$form = $this->form;

$submit = $form->get('submit');
$submit->setValue($this->submitLabel);

$cancel = $form->get('cancel');
$cancel->setValue($this->cancelLabel);

$form->prepare();
?>

<?= $this->form()->openTag($form) ?>

<div id="notifications-tabs">

  <div class="form-group">
      <?php $visibility = $form->get('visibility'); ?>
      <?= $this->formLabel($visibility) ?>
      <?= $this->formElement($visibility) ?>
      <?= $this->formElementErrors()->render($visibility, ['class' => 'help-block']) ?>
  </div>

  <div class="form-group">
      <?php $isExternalUrl = $form->get('is_external_url'); ?>
      <?= $this->formLabel($isExternalUrl) ?>
      <?= $this->formElement($isExternalUrl) ?>
      <?= $this->formElementErrors()->render($isExternalUrl, ['class' => 'help-block']) ?>
  </div>

  <ul class="notifications-tabs">
    <?php foreach($this->languages as $index => $language): ?>
      <li class="<?=$index == 0 ? ' active' : ''?>"><a href="#" class="notifications-tabs-nav" data-tab="notifications-tabs-<?=$language?>"><?=$this->transEsc('notifications_tab_header')?> (<?=strtoupper($language)?>)</a></li>
    <?php endforeach; ?>
  </ul>

  <div class="notifications-tabs-content-wrapper">
    <?php foreach($this->languages as $index => $language): ?>
      <div id="notifications-tabs-<?=$language?>" class="notifications-tabs-content<?=$index == 0 ? ' active' : ''?>">
        <div class="form-group">
            <?php $navTitle = $form->get('nav_title_' . $language); ?>
            <?= $this->formLabel($navTitle) ?>
            <?= $this->formElement($navTitle) ?>
            <?= $this->formElementErrors()->render($navTitle, ['class' => 'help-block']) ?>
        </div>

        <div class="not_external_url_content">
          <div class="form-group">
              <?php $headline = $form->get('headline_' . $language); ?>
              <?= $this->formLabel($headline) ?>
              <?= $this->formElement($headline) ?>
              <?= $this->formElementErrors()->render($headline, ['class' => 'help-block']) ?>
          </div>

          <div class="form-group">
              <?php $content = $form->get('content_' . $language); ?>
              <?= $this->formLabel($content) ?>
              <?= $this->formElement($content) ?>
              <a href="<?php echo $this->url('help-home')?>?topic=markdown" data-lightbox class="help-link"><?=$this->transEsc('Markdown and emoji help')?></a>
              <?= $this->formElementErrors()->render($content, ['class' => 'help-block']) ?>
          </div>
        </div>

        <div class="form-group external_url_content">
            <?php $externalUrl = $form->get('external_url_' . $language); ?>
            <?php $externalUrl->setLabelOptions(['disable_html_escape' => true]); ?>
            <?= $this->formLabel($externalUrl) ?>
            <?= $this->formElement($externalUrl) ?>
            <?= $this->formElementErrors()->render($externalUrl, ['class' => 'help-block']) ?>
        </div>
      </div>
    <?php endforeach; ?>
  </div>
</div>

<div class="form-group">
    <?= $this->formSubmit($submit) ?>
    <?= $this->formSubmit($cancel) ?>
</div>

<?= $this->form()->closeTag($form) ?>
