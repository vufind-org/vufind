<? $mapType = $this->tab->getMapType(); ?>
<? if (isset($mapType) && ($mapType == 'openlayers')) : ?>
  <? $this->headScript()->appendFile('vendor/ol/ol.js');
  $this->headScript()->appendFile('map_tab_ol.js');
  $this->headLink()->appendStylesheet('vendor/ol/ol.css');
  $mapTabData = $this->tab->getMapTabData();
  $mapGraticule = $this->tab->getMapGraticule();
  $popupTitle = $this->transEsc('map_results_label');
  $params = [json_encode($mapTabData), json_encode($popupTitle), json_encode($mapGraticule)];
  $jsParams = implode(', ', $params);
  $jsLoad = "loadMapTab(" . $jsParams . ");"; ?>
  <div id="wrap" style="width: inherit; height: 479px">
    <div id="map-canvas" style="width: 100%; height: 100%"><div id="popup"></div></div>
    <?=$this->inlineScript(\Zend\View\Helper\HeadScript::SCRIPT, $jsLoad, 'SET');?>
  </div>
<? endif; ?>
