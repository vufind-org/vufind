<div class="externalVuFind">
  <?php $results = $this->recommend->getResults() ?>
  <?php $records = $results['records'] ?? [] ?>
  <?php $resultCount = $results['resultCount'] ?? 0; ?>
  <?php $moreResultsUrl = $this->recommend->getMoreResultsUrl(); ?>
  <?php if (!empty($records)): ?>
    <h2><?=$this->transEsc('external_vufind_recommend_heading')?></h2>
    <?php if ($this->translate('external_vufind_recommend_intro', [], '')): ?>
      <p><?=$this->translate('external_vufind_recommend_intro', [
          '%%result_count%%' => $this->localizedNumber($resultCount),
          '%%url%%' => $moreResultsUrl,
      ])?></p>
    <?php endif; ?>
    <div class="list-group">
      <?php foreach ($records as $record): ?>
        <div class="list-group-item">
          <span>
            <a href="<?=$record['url']?>" class="title icon-link" target="_blank">
              <?=$this->icon('external-link', 'icon-link__icon') ?>
              <span class="icon-link__label"><?=$this->escapeHtml($record['title'])?></span>
            </a>
          </span>
        </div>
      <?php endforeach; ?>
      <a class="list-group-item" href="<?=$moreResultsUrl?>">
        <?=$this->icon('external-link', 'icon-link__icon') ?>
        <?=$this->transEsc('More results')?>...
      </a>
    </div>
  <?php endif; ?>
</div>
