<?php
    // Set up convenience variables:
    $limitList = $this->options->getLimitOptions();

    // If a previous limit was used, make that the default; otherwise, use the "default default"
    $lastLimit = $this->searchMemory()->getLastLimit($this->options->getSearchClassId());
    $defaultLimit = empty($lastLimit) ? $this->options->getDefaultLimit() : $lastLimit;
?>
<?php if (count($limitList) > 1): ?>
  <fieldset class="limits">
    <legend><?=$this->transEsc('Results per page')?></legend>
    <select id="limit" name="limit" class="form-control">
      <?php foreach ($limitList as $limitVal): ?>
        <option value="<?=$this->escapeHtmlAttr($limitVal)?>" <?=($limitVal == $defaultLimit) ? 'selected="selected"' : ''?>><?=$this->escapeHtml($limitVal)?></option>
      <?php endforeach; ?>
    </select>
  </fieldset>
<?php endif; ?>
