<?php
  $id = uniqid();
?>
<div class="star-rating<?=$this->readonly ? ' readonly' : ''?>">
  <label class="rating__label" for="rating_<?=$id?>_0" aria-label="<?=$this->transEsc('stars_0')?>">&nbsp;</label>
  <input class="rating__input rating__input--none" name="rating" id="rating_<?=$id?>_0" value="0" type="radio" autocomplete="off" <?=0 === $rating ? 'checked' :''?>>
  <?php for ($level = 10; $level <= 100; $level += 10): ?>
    <?php
      $fieldId = "rating_{$id}_$level";
      $rangeLow = $level;
      $rangeHigh = 100 === $level ? 101 : ($level + 10);
      $class = $level % 20 === 10 ? ' rating__label--half' : '';
      $icon = $this->icon($level % 20 === 10 ? 'rating-half' : 'rating-full', 'rating__icon rating__icon--star');
    ?>
    <label class="rating__label<?=$class?>" for="<?=$fieldId?>" aria-label="<?=$this->transEsc("stars_$level")?>"><?=$icon?></label>
    <input class="rating__input" name="rating" id="<?=$fieldId?>" value="<?=$level ?>" type="radio" autocomplete="off" <?=$rating >= $rangeLow && $rating < $rangeHigh ? ' checked' : ''?><?=$this->readonly ? ' disabled' : ''?>>
  <?php endfor; ?>
</div>
