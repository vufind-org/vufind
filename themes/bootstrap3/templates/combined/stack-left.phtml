<div class="row">
  <?php $columnIndex = 0; ?>
  <?php $span = floor(12/$columns); ?>
  <?php $sectionCount = count($this->combinedResults); ?>
  <?php foreach ($this->combinedResults as $searchClassId => $currentSearch): ?>
    <?php if ((!isset($currentSearch['ajax']) || !$currentSearch['ajax']) && isset($currentSearch['hide_if_empty']) && $currentSearch['hide_if_empty'] && $currentSearch['view']->results->getResultTotal() == 0) { continue; } ?>
    <?php if ($columnIndex < $columns): ?>
      <div class="col-sm-<?=$span ?><?php if($columnIndex == $columns-1): ?> col-sm-pull-<?=$span*($columns-1) ?><?php else: ?> col-sm-push-<?=$span ?><?php endif; ?> combined-list">
    <?php endif; ?>
    <?php
      $viewParams = ['searchClassId' => $searchClassId, 'currentSearch' => $currentSearch];
      // Enable cart if appropriate:
      $viewParams['showCartControls'] = $this->supportsCartOptions[$columnIndex] && $this->showCartControls;
      // Enable bulk options if appropriate:
      $viewParams['showBulkOptions'] = $this->supportsCartOptions[$columnIndex] && $this->showBulkOptions;
    ?>
    <div id="<?=$this->escapeHtmlAttr($currentSearch['domId'])?>">
      <?php $templateSuffix = (isset($currentSearch['ajax']) && $currentSearch['ajax']) ? 'ajax' : 'list'; ?>
      <?=$this->render('combined/results-' . $templateSuffix . '.phtml', $viewParams)?>
    </div>
    <?php ++$columnIndex ?>
    <?php if($columnIndex < $columns || $columnIndex == $sectionCount): ?>
      </div>
    <?php endif; ?>
  <?php endforeach; ?>
</div>