<!-- START of: finna - Related/WorkExpressions.phtml -->
<?php
  $records = $this->related->getResults();
  $limit = $this->related->getResultLimit();
?>
<?php if (!empty($records)): ?>
  <div class="work-expressions">
    <h2><?=$this->transEsc('work_expressions_title')?></h2>
    <div class="list-group">
      <?php $i = 0; ?>
      <?php foreach ($records as $data): ?>
        <div class="list-group-item<?=++$i > $limit ? ' hidden' : ''?>">
          <a href="<?=$this->recordLink()->getUrl($data)?>">
            <?=$this->escapeHtml($data->getTitle())?>
          </a>
          <div class="details">
            <?=$this->record($data)->getFormatList();?>
            <?php $authors = $data->getPrimaryAuthors(); if (!empty($authors)): ?>
              <br/><?=$this->transEsc('by')?>: <?=$this->escapeHtml($authors[0]);?><?php if (count($authors) > 1): ?> <?=$this->transEsc('more_authors_abbrev')?><?php endif; ?>
            <?php endif; ?>
            <?php $pubDates = $data->getPublicationDates(); if (!empty($pubDates)): ?>
              <br/><?=$this->transEsc('Published')?>: (<?=$this->escapeHtml($pubDates[0])?>)
            <?php endif; ?>
          </div>
        </div>
      <?php endforeach; ?>
      <a class="more-link" href="<?=$this->url('search-results')?>?<?=$this->escapeHtmlAttr($this->related->getSearchUrlParams()) ?>&sort=main_date_str+desc" rel="nofollow">
        <span class="text"><?=$this->transEsc('see all')?> <i class="fa fa-list" aria-hidden="true"></i></span>
      </a>
    </div>
  </div>
<?php endif; ?>
<!-- END of: finna - Related/WorkExpressions.phtml -->
