<!-- START of: finna - ajax/feed-list.phtml -->
<div class="list-feed<?= $this->images ? ' with-image' : ''; ?>">
<? if ($this->title || $this->translateTitle): ?><h2 class="feed-header"><?= $this->translateTitle ? $this->transEsc($this->translateTitle) : $this->title; ?></h2><? endif; ?>
<? if (isset($this->description)): ?><p class="additional-description"><?= $this->translate($this->description)?></p><? endif; ?>
  <ul>
    <? $items = isset($this->visualItems) ? array_splice($this->items, 0, $this->visualItems) : $this->items; ?>
    <? foreach($items as $item): ?>
    <li>
      <? if (isset($item['date'])): ?><span class="date"><?= $item['date']; ?></span> <? endif; ?>
      <? if (!isset($this->linkText) && isset($item['link'])):?>
      <a<?= $this->linkTarget ? ' target="' . $this->escapeHtmlAttr($this->linkTarget) . '"' : '' ?> href="<?= $this->escapeHtmlAttr($item['link']) . ($this->feedUrl ? '?feedUrl=' . $this->escapeHtmlAttr(urlencode($this->feedUrl)) : '')?>"<?=$item['modal'] ? ' data-lightbox="" data-lightbox-title="' . $this->escapeHtmlAttr($item['title']) . '"' : ''?> data-feed="<?=$this->escapeHtmlAttr($this->feedUrl)?>"><? endif; ?>
        <? if (isset($item['image']) && isset($item['image']['url'])): ?>
        <img src="<?= $item['image']['url']; ?>" />
        <? endif; ?>
        <span class="title"><?= $item['title']; ?></span>
        <? if (!isset($this->linkText) && isset($item['link'])):?>
        <? if (isset($item['text'])): ?><span class="text"><?= $item['text']; ?></span><? endif; ?>
      </a><? endif; ?>
    </li>
    <? endforeach; ?>

    <? if ($this->moreLink): ?>
    <li class="more-link">
      <a<?= $this->linkTarget ? ' target="' . $this->escapeHtmlAttr($this->linkTarget) . '"' : '' ?> href="<?= $this->escapeHtmlAttr($this->moreLink); ?>"><?= $this->transEsc('More'); ?>&hellip;</a>
    </li>
    <? endif; ?>
  </ul>
</div>
<!-- END of: finna - ajax/feed-list.phtml -->
