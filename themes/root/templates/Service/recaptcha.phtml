<? if(isset($this->useRecaptcha) && $this->useRecaptcha): ?>

  <?=$this->reCaptchaOptions ?>

  <div id="recaptcha_widget" style="display:none">
  <? if ($this->theme == 'custom'): ?>
    <div id="custom_recaptcha_widget">
      <div id="recaptcha_image"></div>
      <div class="recaptcha_only_if_incorrect_sol" class="text-error"><?=$this->translate('recaptcha_incorrect_try_again') ?></div>

      <span class="recaptcha_only_if_image"><?=$this->translate('recaptcha_instructions_visual') ?></span>
      <span class="recaptcha_only_if_audio"><?=$this->translate('recaptcha_instructions_audio') ?></span>

      <input type="text" id="<?=$this->responseField ?>" name="<?=$this->responseField ?>" />

      <div><a href="javascript:Recaptcha.reload()"><?=$this->translate('recaptcha_refresh_btn') ?></a></div>
      <div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')"><?=$this->translate('recaptcha_audio_challenge') ?></a></div>
      <div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')"><?=$this->translate('recaptcha_visual_challenge') ?></a></div>

      <div><a href="javascript:Recaptcha.showhelp()"><?=$this->translate('recaptcha_help_btn') ?></a></div>
    </div>
  <? endif; ?>
  </div>

  <noscript>
    <iframe src="<?=$this->host ?>/noscript?k=<?=$this->publicKey ?><?=$this->errorPart ?>" height="300" width="500" frameborder="0"></iframe>
    <textarea name="<?=$this->challengeField ?>" rows="3" cols="40"></textarea>
    <input type="hidden" name="<?=$this->responseField ?>" value="manual_challenge"/>
  </noscript>

  <script type="text/javascript">
    Recaptcha.create("<?=$this->publicKey ?>", 'recaptcha_widget', <?=$this->options ?>);
  </script>

<? endif; ?>