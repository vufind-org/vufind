<?
    // Set up page title:
    $pageTitle = empty($this->card->id) ? 'Add a Library Card' : "Edit Library Card";
    $this->headTitle($this->translate($pageTitle));

    // Set up breadcrumbs:
    $this->layout()->breadcrumbs = '<a href="' . $this->url('myresearch-home') . '">'
        . $this->transEsc('Your Account') . '</a>' . '<span>&gt;</span><em>'
        . $this->transEsc($pageTitle) . '</em>';
?>
<h1><?=$this->transEsc($pageTitle); ?></h1>

<?=$this->flashmessages()?>

<form method="post" name="<?=empty($this->card->id) ? 'newCardForm' : 'editCardForm'?>" action="">
  <label class="displayBlock" for="card_name"><?=$this->transEsc('Library Card Name'); ?>:</label>
  <input id="card_name" type="text" name="card_name" value="<?=$this->escapeHtmlAttr($this->cardName)?>" size="50"
    class="mainFocus <?=$this->jqueryValidation(array('required'=>'This field is required')) ?>"/>
  <br class="clear"/>

  <? if ($this->targets !== null): ?>
  <label class="displayBlock" for="login_target"><?=$this->transEsc('login_target')?>:</label>
  <select id="login_target" name="target">
  <? foreach ($this->targets as $target): ?>
    <option value="<?=$this->escapeHtmlAttr($target)?>"<?=($target == $this->target ? ' selected="selected"' : '')?>><?=$this->transEsc("source_$target", null, $target)?></option>
  <? endforeach; ?>
  </select>
  <br class="clear"/>
  <? endif; ?>

  <label class="displayBlock" for="login_username"><?=$this->transEsc('Username')?>:</label>
  <input id="login_username" type="text" name="username" value="<?=$this->escapeHtmlAttr($this->username)?>" size="15" class="<?=$this->jqueryValidation(array('required'=>'This field is required'))?>"/>
  <br class="clear"/>
  <label class="displayBlock" for="login_password"><?=$this->transEsc('Password')?>:</label>
  <input id="login_password" type="password" name="password" value="<?=$this->escapeHtmlAttr($this->password)?>" size="15" class="<?=$this->jqueryValidation(array('required'=>'This field is required'))?>"/>
  <br class="clear"/>

  <input class="button" type="submit" name="submit" value="<?=$this->transEsc('Save') ?>"/>
</form>
